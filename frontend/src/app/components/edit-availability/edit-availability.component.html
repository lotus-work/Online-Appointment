<app-navbar></app-navbar>

<div class="container bg-light">
    <div class="row p-2 p-md-3 mt-2 text-light rounded bg-blueClr">
      <div class="col-md-12">
        <h1 class="fw-bold">Edit Availability</h1>
      </div>
  
    </div>
  
    <main class="p-md-2 mt-2">
      <div class="max-w-screen-md vstack gap-6">
  
        <div>
          <div class="py-2">
            <h4>Edit Schedule Details</h4>
          </div>
          <form class="needs-validation" novalidate=""  #updateAvailForm="ngForm" (ngSubmit)="updateAvailDetails(updateAvailForm)">
            <div class="row g-3">
          
  
              <div class="col-sm-6">
                <div class="form-group">
                  <div class="mb-2"><label class="mb-2">Schedule Name</label>
                    <input type="text" name="availabilityName" #availabilityNameRef="ngModel" [(ngModel)]="availDetails[0]!.availabilityName"
                      class="form-control " required>
                  </div>
  
                  <div *ngIf="availabilityNameRef.errors && (availabilityNameRef.dirty || availabilityNameRef.touched)"
                    style="text-align:left; color:red;">
                    <div [hidden]="!availabilityNameRef.errors">
                      <p>&nbsp;Schedule Name is mandatory</p>
                    </div>
                  </div>
                </div>
              </div>
  
  
            
  
              <div class="col-md-6">
                <label for="timezone" class="form-label">Timezone</label>
                
                <select  class="form-select" id="timezone" name="timezone">
                  <option *ngFor="let opt of this.timeZoneArr" [value]="opt.value" [selected]="opt.status == 'true'">
                    {{opt.label}}</option>
                  
               </select>
             
              </div>
  
  
  
            </div>
  
            <div>
              <div class="mt-4 py-2">
                <h4>Change the start and end times of your day</h4>
              </div>
              <div class="col-sm-12 col-md-12 col-lg-12 ">
  
                <div class="accordion" id="accordionPanelsStayOpenExample">
                  <div class="accordion-item" *ngFor="let opt of this.str">
                    <h2 class="accordion-header" id={{opt.arial_abelledby}}>
                      <button class="accordion-button" type="button" data-bs-toggle="collapse"
                        [attr.data-target]="'#' + opt.aria_controls" [attr.aria-expanded]= 'true'
                        [attr.aria-controls]="opt.aria_controls">
                        {{opt.week_name}}
                      </button>
                    </h2>
                    <div id="{{opt.aria_controls}}" class="accordion-collapse collapse show"
                    [attr.aria-labelledby]="opt.arial_abelledby"  data-bs-parent="#accordionPanelsStayOpenExample">
                      <div class="accordion-body">
  
                        <div class="row">
                          <div class="container">
                            <div class="row">
                              <div class="col-sm">
                                <div class="form-check">
                                  <input class="form-check-input" type="checkbox" value="yes" id="myCheck{{opt.id}}"
                                    [checked]="opt.available_timings.length == 0 ? false: true"
                                    (click)="myFunction(opt.id)">
                                  <label class="form-check-label" for="flexCheckDefault">
                                    Are you Availabile?
                                  </label>
                                </div>
                              </div>
                              <div id="onCheck" *ngIf=" opt.available_timings.length >=1; else elseBlock">
                                <div class="col-sm my-2 ">
                                  <div class="input-group">
                                    <select class="form-select" aria-label="Default select example" id="start_date{{opt.id}}">
                                      <option value="09:00 AM">09:00 AM</option>
                                      <option value="09:15 AM">09:15 AM</option>
                                      <option value="09:30 AM">09:30 AM</option>
                                      <option value="09.45 AM">09:45 AM</option>
                                      <option value="10:00 AM">10:00 AM</option>
                                      <option value="10:15 AM">10:15 AM</option>
                                      <option value="10:30 AM">10:30 AM</option>
                                      <option value="10:45 AM">10:45 AM</option>
                                      <option value="11:00 AM">11:00 AM</option>
                                      <option value="11:15 AM">11:15 AM</option>
                                      <option value="11:30 AM">11:30 AM</option>
                                      <option value="11:45 AM">11:45 AM</option>
                                      <option value="12:00 PM">12:00 PM</option>
                                      <option value="12:15 PM">12:15 PM</option>
                                      <option value="12:30 PM">12:30 PM</option>
                                      <option value="12:40 PM">12:40 PM</option>
                                      <option value="13:00 PM">13:00 PM</option>
                                      <option value="13:15 PM">13:15 PM</option>
                                      <option value="13:30 PM">13:30 PM</option>
                                      <option value="13:45 PM">13:45 PM</option>
                                      <option value="14:00 PM">14:00 PM</option>
                                      <option value="14:15 PM">14:15 PM</option>
                                      <option value="14:30 PM">14:30 PM</option>
                                      <option value="14:45 PM">14:45 PM</option>
                                      <option value="15:00 PM">15:00 PM</option>
                                      <option value="15:15 PM">15:15 PM</option>
                                      <option value="15:30 PM">15:30 PM</option>
                                      <option value="15:45 PM">15:45 PM</option>
                                      <option value="16:00 PM">16:00 PM</option>
                                      <option value="16:15 PM">16:15 PM</option>
                                      <option value="16:30 PM">16:30 PM</option>
                                      <option value="16:45 PM">16:45 PM</option>
                                      <option value="17:00 PM">17:00 PM</option>
                                      <option value="17:15 PM">17:15 PM</option>
                                      <option value="17:30 PM">17:30 PM</option>
                                      <option value="17:45 PM">17:45 PM</option>
                                      <option value="18:00 PM">18:00 PM</option>
                                      <option value="18:15 PM">18:15 PM</option>
                                      <option value="18:30 PM">18:30 PM</option>
                                      <option value="18:45 PM">18:45 PM</option>
                                      <option value="19:00 PM">19:00 PM</option>
                                      <option value="19:15 PM">19:15 PM</option>
                                      <option value="19:30 PM">19:30 PM</option>
                                      <option value="19:45 PM">19:45 PM</option>
                                      <option value="20:00 PM">20:00 PM</option>
                                      <option value="20:15 PM">20:15 PM</option>
                                      <option value="20:30 PM">20:30 PM</option>
                                      <option value="20:45 PM">20:45 PM</option>
                                      <option value="21:00 PM">21:00 PM</option>
                                      <option value="21:15 PM">21:15 PM</option>
                                      <option value="21:30 PM">21:30 PM</option>
                                      <option value="21:45 PM">21:45 PM</option>
                                      <option value="22:00 PM">22:00 PM</option>
                                      <option value="22:15 PM">22:15 PM</option>
                                      <option value="22:30 PM">22:30 PM</option>
                                      <option value="22:45 PM">22:45 PM</option>
                                      <option value="23:00 PM">23:00 PM</option>
                                      <option value="23:15 PM">23:15 PM</option>
                                      <option value="23:30 PM">23:30 PM</option>
                                      <option value="23:45 PM">23:45 PM</option>
                                      <option value="00:00 AM">00:00 AM</option>
                                      <option value="00:15 AM">00:15 AM</option>
                                      <option value="00:30 AM">00:30 AM</option>
                                      <option value="00:45 AM">00:45 AM</option>
                                      <option value="01:00 AM">01:00 AM</option>
                                      <option value="01:15 AM">01:15 AM</option>
                                      <option value="01:30 AM">01:30 AM</option>
                                      <option value="01:45 AM">01:45 AM</option>
                                      <option value="02:00 AM">02:00 AM</option>
                                      <option value="02:15 AM">02:15 AM</option>
                                      <option value="02:30 AM">02:30 AM</option>
                                      <option value="02:45 AM">02:45 AM</option>
                                      <option value="03:00 AM">03:00 AM</option>
                                      <option value="03:15 AM">03:15 AM</option>
                                      <option value="03:30 AM">03:30 AM</option>
                                      <option value="03:45 AM">03:45 AM</option>
                                      <option value="04:00 AM">04:00 AM</option>
                                      <option value="04:15 AM">04:15 AM</option>
                                      <option value="04:30 AM">04:30 AM</option>
                                      <option value="04:45 AM">04:45 AM</option>
                                      <option value="05:00 AM">05:00 AM</option>
                                      <option value="05:15 AM">05:15 AM</option>
                                     
                                      <option value="05:30 AM">05:30 AM</option>
                                      <option value="05:45 AM">05:45 AM</option>
                                      <option value="06:00 AM">06:00 AM</option>
                                      <option value="06:15 AM">06:15 AM</option>
                                      <option value="06:30 AM">06:30 AM</option>
                                      <option value="06:45 AM">06:45 AM</option>
                                      <option value="07:00 AM">07:00 AM</option>
                                      <option value="07:15 AM">07:15 AM</option>
                                      <option value="07:30 AM">07:30 AM</option>
                                      <option value="07:45 AM">07:45 AM</option>
                                      <option value="08:00 AM">08:00 AM</option>
                                      <option value="08:15 AM">08:15 AM</option>
                                      <option value="08:30 AM">08:30 AM</option>
                                      <option value="08:45 AM">08:45 AM</option>
  
                                    </select>
                                    <span class="input-group-addon mx-4">TO</span>
                                    <select class="form-select" aria-label="Default select example" id="end_date{{opt.id}}">
                                      <option value="09:00 AM">09:00 AM</option>
                                      <option value="09:15 AM">09:15 AM</option>
                                      <option value="09:30 AM">09:30 AM</option>
                                      <option value="09.45 AM">09:45 AM</option>
                                      <option value="10:00 AM">10:00 AM</option>
                                      <option value="10:15 AM">10:15 AM</option>
                                      <option value="10:30 AM">10:30 AM</option>
                                      <option value="10:45 AM">10:45 AM</option>
                                      <option value="11:00 AM">11:00 AM</option>
                                      <option value="11:15 AM">11:15 AM</option>
                                      <option value="11:30 AM">11:30 AM</option>
                                      <option value="11:45 AM">11:45 AM</option>
                                      <option value="12:00 PM">12:00 PM</option>
                                      <option value="12:15 PM">12:15 PM</option>
                                      <option value="12:30 PM">12:30 PM</option>
                                      <option value="12:40 PM">12:40 PM</option>
                                      <option value="13:00 PM">13:00 PM</option>
                                      <option value="13:15 PM">13:15 PM</option>
                                      <option value="13:30 PM">13:30 PM</option>
                                      <option value="13:45 PM">13:45 PM</option>
                                      <option value="14:00 PM">14:00 PM</option>
                                      <option value="14:15 PM">14:15 PM</option>
                                      <option value="14:30 PM">14:30 PM</option>
                                      <option value="14:45 PM">14:45 PM</option>
                                      <option value="15:00 PM">15:00 PM</option>
                                      <option value="15:15 PM">15:15 PM</option>
                                      <option value="15:30 PM">15:30 PM</option>
                                      <option value="15:45 PM">15:45 PM</option>
                                      <option value="16:00 PM">16:00 PM</option>
                                      <option value="16:15 PM">16:15 PM</option>
                                      <option value="16:30 PM">16:30 PM</option>
                                      <option value="16:45 PM">16:45 PM</option>
                                      <option value="17:00 PM">17:00 PM</option>
                                      <option value="17:15 PM">17:15 PM</option>
                                      <option value="17:30 PM">17:30 PM</option>
                                      <option value="17:45 PM">17:45 PM</option>
                                      <option value="18:00 PM">18:00 PM</option>
                                      <option value="18:15 PM">18:15 PM</option>
                                      <option value="18:30 PM">18:30 PM</option>
                                      <option value="18:45 PM">18:45 PM</option>
                                      <option value="19:00 PM">19:00 PM</option>
                                      <option value="19:15 PM">19:15 PM</option>
                                      <option value="19:30 PM">19:30 PM</option>
                                      <option value="19:45 PM">19:45 PM</option>
                                      <option value="20:00 PM">20:00 PM</option>
                                      <option value="20:15 PM">20:15 PM</option>
                                      <option value="20:30 PM">20:30 PM</option>
                                      <option value="20:45 PM">20:45 PM</option>
                                      <option value="21:00 PM">21:00 PM</option>
                                      <option value="21:15 PM">21:15 PM</option>
                                      <option value="21:30 PM">21:30 PM</option>
                                      <option value="21:45 PM">21:45 PM</option>
                                      <option value="22:00 PM">22:00 PM</option>
                                      <option value="22:15 PM">22:15 PM</option>
                                      <option value="22:30 PM">22:30 PM</option>
                                      <option value="22:45 PM">22:45 PM</option>
                                      <option value="23:00 PM">23:00 PM</option>
                                      <option value="23:15 PM">23:15 PM</option>
                                      <option value="23:30 PM">23:30 PM</option>
                                      <option value="23:45 PM">23:45 PM</option>
                                      <option value="00:00 AM">00:00 AM</option>
                                      <option value="00:15 AM">00:15 AM</option>
                                      <option value="00:30 AM">00:30 AM</option>
                                      <option value="00:45 AM">00:45 AM</option>
                                      <option value="01:00 AM">01:00 AM</option>
                                      <option value="01:15 AM">01:15 AM</option>
                                      <option value="01:30 AM">01:30 AM</option>
                                      <option value="01:45 AM">01:45 AM</option>
                                      <option value="02:00 AM">02:00 AM</option>
                                      <option value="02:15 AM">02:15 AM</option>
                                      <option value="02:30 AM">02:30 AM</option>
                                      <option value="02:45 AM">02:45 AM</option>
                                      <option value="03:00 AM">03:00 AM</option>
                                      <option value="03:15 AM">03:15 AM</option>
                                      <option value="03:30 AM">03:30 AM</option>
                                      <option value="03:45 AM">03:45 AM</option>
                                      <option value="04:00 AM">04:00 AM</option>
                                      <option value="04:15 AM">04:15 AM</option>
                                      <option value="04:30 AM">04:30 AM</option>
                                      <option value="04:45 AM">04:45 AM</option>
                                      <option value="05:00 AM">05:00 AM</option>
                                      <option value="05:15 AM">05:15 AM</option>
                                     
                                      <option value="05:30 AM">05:30 AM</option>
                                      <option value="05:45 AM">05:45 AM</option>
                                      <option value="06:00 AM">06:00 AM</option>
                                      <option value="06:15 AM">06:15 AM</option>
                                      <option value="06:30 AM">06:30 AM</option>
                                      <option value="06:45 AM">06:45 AM</option>
                                      <option value="07:00 AM">07:00 AM</option>
                                      <option value="07:15 AM">07:15 AM</option>
                                      <option value="07:30 AM">07:30 AM</option>
                                      <option value="07:45 AM">07:45 AM</option>
                                      <option value="08:00 AM">08:00 AM</option>
                                      <option value="08:15 AM">08:15 AM</option>
                                      <option value="08:30 AM">08:30 AM</option>
                                      <option value="08:45 AM">08:45 AM</option>
  
                                    </select>
                                  </div>
                                </div>
                                <div class="col-sm my-2 ">
                                  <button type="button" class="btn btn-dark" (click)="addTime(opt.id)"><span class="fs-5"><i class="fa fa-plus-circle" aria-hidden="true"></i></span> Add</button>
                                </div>
                                <div class="row">
                                  <p class="fw-bold my-4">Your availability timings are : </p>
                                  <div class="col-md-8">
  
                                    <ul class="list-group" id="availableTimings">
                                      <li class="list-group-item d-flex justify-content-between align-items-center"
                                        *ngFor="let timings of opt.available_timings" id="list{{timings.id}}">
                                        {{timings.start_time}} - {{timings.end_time}}
                                        <button id="data" type="button" class="badge bg-danger"
                                          (click)="removeTimings(opt.id,timings.id)"><span class="fs-5"><i class="fa fa-trash" aria-hidden="true"></i></span></button>
  
                                      </li>
  
                                    </ul>
                                  </div>
                                </div>
                              </div>
  
  
                              <ng-template #elseBlock>
                                <div id="offCheck">
                                  <p class="my-2 tex-muted"> Unavailable</p>
                                </div>
                              </ng-template>
  
  
                            </div>
  
                          </div>
                        </div>
  
                      </div>
                    </div>
                  </div>
                
                </div>
              </div>
            </div>
  
  
  
            <hr class="my-4">
            <button class="w-100 btn btn-primary btn-lg" type="submit"
            [disabled]="!updateAvailForm.form.valid">Update</button>
          </form>
        </div>
  
      </div>
    </main>
  
  
  </div>